import{BufferAttribute as t,Sphere as e,Box3 as n,BufferGeometry as r,ShaderMaterial as i,FrontSide as o,Color as a}from"three";import{NodeMaterial as s}from"three/webgpu";import{uniform as l,texture as u,uv as h,sub as f,clamp as c,add as d,div as p,fwidth as g,smoothstep as v,mix as y,mul as m,oneMinus as b,max as w,min as x}from"three/tsl";function I(t,e,n){return e=O(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,S()?Reflect.construct(e,n||[],O(t).constructor):e.apply(t,n))}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A(t,e,n){return(e=P(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(S=function(){return!!t})()}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function P(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function F(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M,C={exports:{}};var E=F((M||(M=1,function(t){var e=/\n/,n="\n",r=/\s/;function i(t,e,n,r){var i=t.indexOf(e,n);return-1===i||i>r?r:i}function o(t){return r.test(t)}function a(t,e,n,r){return{start:e,end:e+Math.min(r,n-e)}}t.exports=function(e,n){return t.exports.lines(e,n).map(function(t){return e.substring(t.start,t.end)}).join("\n")},t.exports.lines=function(t,r){if(0===(r=r||{}).width&&"nowrap"!==r.mode)return[];t=t||"";var s="number"==typeof r.width?r.width:Number.MAX_VALUE,l=Math.max(0,r.start||0),u="number"==typeof r.end?r.end:t.length,h=r.mode,f=r.measure||a;return"pre"===h?function(t,n,r,i,o){for(var a=[],s=r,l=r;l<i&&l<n.length;l++){var u=n.charAt(l),h=e.test(u);if(h||l===i-1){var f=t(n,s,h?l:l+1,o);a.push(f),s=l+1}}return a}(f,t,l,u,s):function(t,e,r,a,s,l){var u=[],h=s;for("nowrap"===l&&(h=Number.MAX_VALUE);r<a&&r<e.length;){for(var f=i(e,n,r,a);r<f&&o(e.charAt(r));)r++;var c=t(e,r,f,h),d=r+(c.end-c.start),p=d+1;if(d<f){for(;d>r&&!o(e.charAt(d));)d--;if(d===r)p>r+1&&p--,d=p;else for(p=d;d>r&&o(e.charAt(d-1));)d--}if(d>=r){var g=t(e,r,d,h);u.push(g)}r=p}return u}(f,t,l,u,s,h)}}(C)),C.exports)),D=["x","e","a","o","n","s","r","c","u","m","v","w","z"],U=["m","w"],N=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],G="\t".charCodeAt(0),B=" ".charCodeAt(0),H=function(){return _(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(this,t),this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)},[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"descender",get:function(){return this._descender}},{key:"ascender",get:function(){return this._ascender}},{key:"xHeight",get:function(){return this._xHeight}},{key:"baseline",get:function(){return this._baseline}},{key:"capHeight",get:function(){return this._capHeight}},{key:"lineHeight",get:function(){return this._lineHeight}},{key:"linesTotal",get:function(){return this._linesTotal}},{key:"lettersTotal",get:function(){return this._lettersTotal}},{key:"wordsTotal",get:function(){return this._wordsTotal}},{key:"update",value:function(t){var e=this;if(t=Object.assign({measure:this._measure},t),this._options=t,this._options.tabSize=Y(this._options.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var n=this.glyphs,r=t.text||"",i=t.font;this._setupSpaceGlyphs(i);var o=E.lines(r,t),a=t.width||0,s=r.split(" ").filter(function(t){return"\n"!==t}).length,l=r.split("").filter(function(t){return"\n"!==t&&" "!==t}).length;n.length=0;var u=o.reduce(function(t,e){return Math.max(t,e.width,a)},0),h=0,f=0,c=Y(t.lineHeight,i.common.lineHeight),d=i.common.base,p=c-d,g=t.letterSpacing||0,v=c*o.length-p,y=function(t){if("center"===t)return 1;if("right"===t)return 2;return 0}(this._options.align);f-=v,this._width=u,this._height=v,this._descender=c-d,this._baseline=d,this._xHeight=function(t){for(var e=0;e<D.length;e++){var n=D[e].charCodeAt(0),r=V(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(i),this._capHeight=function(t){for(var e=0;e<N.length;e++){var n=N[e].charCodeAt(0),r=V(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(i),this._lineHeight=c,this._ascender=c-p-this._xHeight;var m=0,b=0;o.forEach(function(t,a){for(var d,p=t.start,v=t.end,w=t.width,x=r.slice(p,v).split(" ").filter(function(t){return""!==t}).length,I=r.slice(p,v).split(" ").join("").length,T=0,_=0,A=p;A<v;A++){var O=r.charCodeAt(A),k=e.getGlyph(i,O);if(k){d&&(h+=R(i,d.id,k.id));var S=h;1===y?S+=(u-w)/2:2===y&&(S+=u-w),n.push({position:[S,f],data:k,index:A,linesTotal:o.length,lineIndex:a,lineLettersTotal:I,lineLetterIndex:T,lineWordsTotal:x,lineWordIndex:_,wordsTotal:s,wordIndex:m,lettersTotal:l,letterIndex:b}),k.id===B&&d.id!==B&&(_++,m++),k.id!==B&&(T++,b++),h+=k.xadvance+g,d=k}}f+=c,h=0}),this._lettersTotal=l,this._wordsTotal=s,this._linesTotal=o.length}},{key:"getGlyph",value:function(t,e){var n=z(t,e);return n||(e===G?this._fallbackTabGlyph:e===B?this._fallbackSpaceGlyph:null)}},{key:"computeMetrics",value:function(t,e,n,r){var i,o,a=this._options.letterSpacing||0,s=this._options.font,l=0,u=0,h=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var f=e;f<n;f++){var c=t.charCodeAt(f);if(i=this.getGlyph(s,c)){i.char=t[f],i.xoffset;var d=(l+=o?R(s,o.id,i.id):0)+i.xadvance+a,p=l+i.width;if(p>=r||d>=r)break;l=d,u=p,o=i}h++}return o&&(u+=o.xoffset),{start:e,end:e+h,width:u}}},{key:"_setupSpaceGlyphs",value:function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=z(t,B)||function(t){for(var e=0;e<U.length;e++){var n=U[e].charCodeAt(0),r=V(t.chars,n);if(r>=0)return t.chars[r]}return 0}(t)||t.chars[0],n=this._options.tabSize*e.xadvance;this._fallbackSpaceGlyph=e;var r=Object.assign({},e);this._fallbackTabGlyph=Object.assign(r,{x:0,y:0,xadvance:n,id:G,xoffset:0,yoffset:0,width:0,height:0})}}}])}();function z(t,e){if(!t.chars||0===t.chars.length)return null;var n=V(t.chars,e);return n>=0?t.chars[n]:null}function R(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var r=t.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===e&&o.second===n)return o.amount}return 0}function V(t,e,n){for(var r=n=n||0;r<t.length;r++)if(t[r].id===e)return r;return-1}function Y(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}var J={min:[0,0],max:[0,0]};function X(t){var e=t.length/2;J.min[0]=t[0],J.min[1]=t[1],J.max[0]=t[0],J.max[1]=t[1];for(var n=0;n<e;n++){var r=t[2*n+0],i=t[2*n+1];J.min[0]=Math.min(r,J.min[0]),J.min[1]=Math.min(i,J.min[1]),J.max[0]=Math.max(r,J.max[0]),J.max[1]=Math.max(i,J.max[1])}}var q={computeBox:function(t,e){return X(t),e.min.set(J.min[0],J.min[1],0),e.max.set(J.max[0],J.max[1],0),e},computeSphere:function(t,e){X(t);var n=J.min[0],r=J.min[1],i=J.max[0]-n,o=J.max[1]-r,a=Math.sqrt(i*i+o*o);e.center.set(n+i/2,r+o/2,0),e.radius=a/2}};var K,Z,Q,$,tt,et,nt,rt,it={pages:function(t){var e=new Float32Array(4*t.length*1),n=0;return t.forEach(function(t){var r=t.data.page||0;e[n++]=r,e[n++]=r,e[n++]=r,e[n++]=r}),e},attributes:function(t,e,n,r,i){var o=new Float32Array(4*t.length*2),a=new Float32Array(4*t.length*2),s=new Float32Array(4*t.length*2),l=new Float32Array(4*t.length*2),u=new Float32Array(4*t.length*2),h=new Float32Array(4*t.length*2),f=0,c=0,d=0,p=0,g=0,v=0;return t.forEach(function(t){var y=t.data,m=y.x+y.width,b=y.y+y.height,w=y.x/e,x=y.y/n,I=m/e,T=b/n;r&&(x=(n-y.y)/n,T=(n-b)/n),o[f++]=w,o[f++]=x,o[f++]=w,o[f++]=T,o[f++]=I,o[f++]=T,o[f++]=I,o[f++]=x,a[p++]=t.position[0]/i.width,a[p++]=(t.position[1]+i.height)/i.height,a[p++]=t.position[0]/i.width,a[p++]=(t.position[1]+i.height+y.height)/i.height,a[p++]=(t.position[0]+y.width)/i.width,a[p++]=(t.position[1]+i.height+y.height)/i.height,a[p++]=(t.position[0]+y.width)/i.width,a[p++]=(t.position[1]+i.height)/i.height,s[g++]=0,s[g++]=1,s[g++]=0,s[g++]=0,s[g++]=1,s[g++]=0,s[g++]=1,s[g++]=1,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height;var _=t.position[0]+y.xoffset,A=t.position[1]+y.yoffset,O=y.width,k=y.height;u[c++]=_,u[c++]=A,u[c++]=_,u[c++]=A+k,u[c++]=_+O,u[c++]=A+k,u[c++]=_+O,u[c++]=A,h[d++]=_+O/2,h[d++]=A+k/2,h[d++]=_+O/2,h[d++]=A+k/2,h[d++]=_+O/2,h[d++]=A+k/2,h[d++]=_+O/2,h[d++]=A+k/2}),{uvs:o,layoutUvs:a,positions:u,centers:h,glyphUvs:s,glyphResolution:l}},infos:function(t,e){for(var n=new Float32Array(4*t.length),r=new Float32Array(4*t.length),i=new Float32Array(4*t.length),o=new Float32Array(4*t.length),a=new Float32Array(4*t.length),s=new Float32Array(4*t.length),l=new Float32Array(4*t.length),u=new Float32Array(4*t.length),h=new Float32Array(4*t.length),f=new Float32Array(4*t.length),c=0,d=0,p=0,g=0,v=0,y=0,m=0,b=0,w=0,x=0,I=0;I<t.length;I++){var T=t[I];n[c++]=T.linesTotal,n[c++]=T.linesTotal,n[c++]=T.linesTotal,n[c++]=T.linesTotal,r[d++]=T.lineIndex,r[d++]=T.lineIndex,r[d++]=T.lineIndex,r[d++]=T.lineIndex,i[p++]=T.lineLettersTotal,i[p++]=T.lineLettersTotal,i[p++]=T.lineLettersTotal,i[p++]=T.lineLettersTotal,o[g++]=T.lineLetterIndex,o[g++]=T.lineLetterIndex,o[g++]=T.lineLetterIndex,o[g++]=T.lineLetterIndex,a[v++]=T.lineWordsTotal,a[v++]=T.lineWordsTotal,a[v++]=T.lineWordsTotal,a[v++]=T.lineWordsTotal,s[y++]=T.lineWordIndex,s[y++]=T.lineWordIndex,s[y++]=T.lineWordIndex,s[y++]=T.lineWordIndex,l[m++]=T.wordsTotal,l[m++]=T.wordsTotal,l[m++]=T.wordsTotal,l[m++]=T.wordsTotal,u[b++]=T.wordIndex,u[b++]=T.wordIndex,u[b++]=T.wordIndex,u[b++]=T.wordIndex,h[w++]=T.lettersTotal,h[w++]=T.lettersTotal,h[w++]=T.lettersTotal,h[w++]=T.lettersTotal,f[x++]=T.letterIndex,f[x++]=T.letterIndex,f[x++]=T.letterIndex,f[x++]=T.letterIndex}return{linesTotal:n,lineIndex:r,lineLettersTotal:i,lineLetterIndex:o,lineWordsTotal:a,lineWordIndex:s,wordsTotal:l,wordIndex:u,lettersTotal:h,letterIndex:f}}};function ot(){return Z?K:(Z=1,K=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}})}function at(){if(et)return tt;function t(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}return et=1,tt=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}}var st=function(){if(rt)return nt;rt=1;var t=ot(),e=function(){if($)return Q;$=1;var t=Object.prototype.toString;return Q=function(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===t.call(e.buffer)||Array.isArray(e)}}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(),n=at(),r=[0,2,3],i=[2,1,3];return nt=function(o,a){o&&(e(o)||n(o))||(a=o||{},o=null);for(var s="string"==typeof(a="number"==typeof a?{count:a}:a||{}).type?a.type:"uint16",l="number"==typeof a.count?a.count:1,u=a.start||0,h=!1!==a.clockwise?r:i,f=h[0],c=h[1],d=h[2],p=6*l,g=o||new(t(s))(p),v=0,y=0;v<p;v+=6,y+=4){var m=v+u;g[m+0]=y+0,g[m+1]=y+1,g[m+2]=y+2,g[m+3]=y+f,g[m+4]=y+c,g[m+5]=y+d}return g}}(),lt=F(st),ut=function(){function i(t){var e;return T(this,i),"string"==typeof t&&(t={text:t}),(e=I(this,i))._options=Object.assign({},t),e._layout=null,e._visibleGlyphs=[],e.update(e._options),e}return k(i,r),_(i,[{key:"layout",get:function(){return this._layout}},{key:"visibleGlyphs",get:function(){return this._visibleGlyphs}},{key:"update",value:function(e){if(e=this._validateOptions(e)){this._layout=function(t){return new H(t)}(e);var n=!1!==e.flipY,r=e.font,i=r.common.scaleW,o=r.common.scaleH,a=this._layout.glyphs.filter(function(t){var e=t.data;return e.width*e.height>0});this._visibleGlyphs=a;var s=it.attributes(a,i,o,n,this._layout),l=it.infos(a,this._layout),u=lt([],{clockwise:!0,type:"uint16",count:a.length});if(this.setIndex(u),this.setAttribute("position",new t(s.positions,2)),this.setAttribute("center",new t(s.centers,2)),this.setAttribute("uv",new t(s.uvs,2)),this.setAttribute("layoutUv",new t(s.layoutUvs,2)),this.setAttribute("glyphUv",new t(s.glyphUvs,2)),this.setAttribute("glyphResolution",new t(s.glyphResolution,2)),this.setAttribute("lineIndex",new t(l.lineIndex,1)),this.setAttribute("lineLettersTotal",new t(l.lineLettersTotal,1)),this.setAttribute("lineLetterIndex",new t(l.lineLetterIndex,1)),this.setAttribute("lineWordsTotal",new t(l.lineWordsTotal,1)),this.setAttribute("lineWordIndex",new t(l.lineWordIndex,1)),this.setAttribute("wordIndex",new t(l.wordIndex,1)),this.setAttribute("letterIndex",new t(l.letterIndex,1)),!e.multipage&&"page"in this.attributes)this.deleteAttribute("page");else if(e.multipage){var h=it.pages(a);this.setAttribute("page",new t(h,1))}}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new e);var t=this.attributes.position.array,n=this.attributes.position.itemSize;if(!t||!n||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);q.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new n);var t=this.boundingBox,e=this.attributes.position.array,r=this.attributes.position.itemSize;if(e&&r&&!(e.length<2))return q.computeBox(e,t);t.makeEmpty()}},{key:"_validateOptions",value:function(t){if("string"==typeof t&&(t={text:t}),!(t=Object.assign({},this._options,t)).font)throw new TypeError("must specify a { font } in options");return t}}])}(),ht={common:{uOpacity:{value:1},uColor:{value:{r:255,g:255,b:255}},uMap:{value:null}},rendering:{uThreshold:{value:.2},uAlphaTest:{value:.01}},strokes:{uStrokeColor:{value:{r:255,g:0,b:0}},uStrokeOutsetWidth:{value:0},uStrokeInsetWidth:{value:.3}}},ft={side:o,transparent:!0,defines:{IS_SMALL:!1},extensions:{derivatives:!0},uniforms:W(W(W({},ht.common),ht.rendering),ht.strokes),vertexShader:"#define GLSLIFY 1\nattribute vec2 layoutUv;attribute float lineIndex;attribute float lineLettersTotal;attribute float lineLetterIndex;attribute float lineWordsTotal;attribute float lineWordIndex;attribute float wordIndex;attribute float letterIndex;varying vec2 vUv;varying vec2 vLayoutUv;varying vec3 vViewPosition;varying vec3 vNormal;varying float vLineIndex;varying float vLineLettersTotal;varying float vLineLetterIndex;varying float vLineWordsTotal;varying float vLineWordIndex;varying float vWordIndex;varying float vLetterIndex;void main(){vec4 mvPosition=vec4(position,1.0);mvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;vUv=uv;vLayoutUv=layoutUv;vViewPosition=-mvPosition.xyz;vNormal=normal;vLineIndex=lineIndex;vLineLettersTotal=lineLettersTotal;vLineLetterIndex=lineLetterIndex;vLineWordsTotal=lineWordsTotal;vLineWordIndex=lineWordIndex;vWordIndex=wordIndex;vLetterIndex=letterIndex;}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;uniform float uOpacity;uniform float uThreshold;uniform float uAlphaTest;uniform vec3 uColor;uniform sampler2D uMap;uniform vec3 uStrokeColor;uniform float uStrokeOutsetWidth;uniform float uStrokeInsetWidth;float median(float r,float g,float b){return max(min(r,g),min(max(r,g),b));}void main(){vec3 s=texture2D(uMap,vUv).rgb;float sigDist=median(s.r,s.g,s.b)-0.5;float afwidth=1.4142135623730951/2.0;\n#ifdef IS_SMALL\nfloat alpha=smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDist);\n#else\nfloat alpha=clamp(sigDist/fwidth(sigDist)+0.5,0.0,1.0);\n#endif\nfloat sigDistOutset=sigDist+uStrokeOutsetWidth*0.5;float sigDistInset=sigDist-uStrokeInsetWidth*0.5;\n#ifdef IS_SMALL\nfloat outset=smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDistOutset);float inset=1.0-smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDistInset);\n#else\nfloat outset=clamp(sigDistOutset/fwidth(sigDistOutset)+0.5,0.0,1.0);float inset=1.0-clamp(sigDistInset/fwidth(sigDistInset)+0.5,0.0,1.0);\n#endif\nfloat border=outset*inset;if(alpha<uAlphaTest)discard;vec4 filledFragColor=vec4(uColor,uOpacity*alpha);gl_FragColor=filledFragColor;}"},ct=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(this,t),I(this,t,[e=Object.assign(JSON.parse(JSON.stringify(ft)),e)])}return k(t,i),_(t)}(),dt={transparent:!0,opacity:1,alphaTest:.01,threshold:.2,color:"#ffffff",strokeColor:"#000000",strokeOutsetWidth:0,strokeInsetWidth:.3,isSmooth:0},pt=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(this,t),n=Object.assign(JSON.parse(JSON.stringify(dt)),n),(e=I(this,t)).transparent=n.transparent,e.alphaTest=n.alphaTest,e.opacity=l(n.opacity),e.color=l(new a(n.color)),e.map=n.map,e.isSmooth=l(n.isSmooth),e.threshold=l(n.threshold),e.strokeColor=l(new a(n.strokeColor)),e.strokeOutsetWidth=l(n.strokeOutsetWidth),e.strokeInsetWidth=l(n.strokeInsetWidth);var r,i,o,s=.7071067811865476,_=u(e.map,h()),A=f((r=_.r,i=_.g,o=_.b,w(x(r,i),x(w(r,i),o))),.5),O=c(d(p(A,g(A)),.5),0,1),k=v(f(e.threshold,s),d(e.threshold,s),A);O=y(O,k,e.isSmooth);var S=d(A,m(e.strokeOutsetWidth,.5)),L=f(A,m(e.strokeOutsetWidth,.5)),W=c(d(p(S,g(S)),.5),0,1),j=b(c(d(p(L,g(L)),.5),0,1)),P=v(f(e.threshold,s),d(e.threshold,s),S),F=b(v(f(e.threshold,s),d(e.threshold,s),L));W=y(W,P,e.isSmooth),j=y(j,F,e.isSmooth);var M=m(W,j);return e.colorNode=y(e.color,e.strokeColor,M),e.opacityNode=m(e.opacity,d(O,M)),e}return k(t,s),_(t)}();export{ut as MSDFTextGeometry,ct as MSDFTextMaterial,pt as MSDFTextNodeMaterial,ht as uniforms};
