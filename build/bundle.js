!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three"),require("three/webgpu"),require("three/tsl")):"function"==typeof define&&define.amd?define(["exports","three","three/webgpu","three/tsl"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bundle={},t.three,t.webgpu,t.tsl)}(this,(function(t,e,r,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=f();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function l(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function v(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}var y={exports:{}};!function(t){var e=/\n/,r="\n",n=/\s/;function i(t,e,r,n){var i=t.indexOf(e,r);return-1===i||i>n?n:i}function o(t){return n.test(t)}function a(t,e,r,n){return{start:e,end:e+Math.min(n,r-e)}}t.exports=function(e,r){return t.exports.lines(e,r).map((function(t){return e.substring(t.start,t.end)})).join("\n")},t.exports.lines=function(t,n){if(0===(n=n||{}).width&&"nowrap"!==n.mode)return[];t=t||"";var s="number"==typeof n.width?n.width:Number.MAX_VALUE,l=Math.max(0,n.start||0),u="number"==typeof n.end?n.end:t.length,h=n.mode,f=n.measure||a;return"pre"===h?function(t,r,n,i,o){for(var a=[],s=n,l=n;l<i&&l<r.length;l++){var u=r.charAt(l),h=e.test(u);if(h||l===i-1){var f=t(r,s,h?l:l+1,o);a.push(f),s=l+1}}return a}(f,t,l,u,s):function(t,e,n,a,s,l){var u=[],h=s;"nowrap"===l&&(h=Number.MAX_VALUE);for(;n<a&&n<e.length;){for(var f=i(e,r,n,a);n<f&&o(e.charAt(n));)n++;var d=t(e,n,f,h),c=n+(d.end-d.start),p=c+r.length;if(c<f){for(;c>n&&!o(e.charAt(c));)c--;if(c===n)p>n+r.length&&p--,c=p;else for(p=c;c>n&&o(e.charAt(c-r.length));)c--}if(c>=n){var g=t(e,n,c,h);u.push(g)}n=p}return u}(f,t,l,u,s,h)}}(y);var m=y.exports,b=["x","e","a","o","n","s","r","c","u","m","v","w","z"],w=["m","w"],x=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],T="\t".charCodeAt(0),A=" ".charCodeAt(0),I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}return a(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"descender",get:function(){return this._descender}},{key:"ascender",get:function(){return this._ascender}},{key:"xHeight",get:function(){return this._xHeight}},{key:"baseline",get:function(){return this._baseline}},{key:"capHeight",get:function(){return this._capHeight}},{key:"lineHeight",get:function(){return this._lineHeight}},{key:"linesTotal",get:function(){return this._linesTotal}},{key:"lettersTotal",get:function(){return this._lettersTotal}},{key:"wordsTotal",get:function(){return this._wordsTotal}},{key:"update",value:function(t){var e=this;if(t=Object.assign({measure:this._measure},t),this._options=t,this._options.tabSize=k(this._options.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var r=this.glyphs,n=t.text||"",i=t.font;this._setupSpaceGlyphs(i);var o=m.lines(n,t),a=t.width||0,s=n.split(" ").filter((function(t){return"\n"!==t})).length,l=n.split("").filter((function(t){return"\n"!==t&&" "!==t})).length;r.length=0;var u=o.reduce((function(t,e){return Math.max(t,e.width,a)}),0),h=0,f=0,d=k(t.lineHeight,i.common.lineHeight),c=i.common.base,p=d-c,g=t.letterSpacing||0,v=d*o.length-p,y=function(t){if("center"===t)return 1;if("right"===t)return 2;return 0}(this._options.align);f-=v,this._width=u,this._height=v,this._descender=d-c,this._baseline=c,this._xHeight=function(t){for(var e=0;e<b.length;e++){var r=b[e].charCodeAt(0),n=S(t.chars,r);if(n>=0)return t.chars[n].height}return 0}(i),this._capHeight=function(t){for(var e=0;e<x.length;e++){var r=x[e].charCodeAt(0),n=S(t.chars,r);if(n>=0)return t.chars[n].height}return 0}(i),this._lineHeight=d,this._ascender=d-p-this._xHeight;var w=0,T=0;o.forEach((function(t,a){for(var c,p=t.start,v=t.end,m=t.width,b=n.slice(p,v).split(" ").filter((function(t){return""!==t})).length,x=n.slice(p,v).split(" ").join("").length,I=0,_=0,S=p;S<v;S++){var k=n.charCodeAt(S),L=e.getGlyph(i,k);if(L){c&&(h+=O(i,c.id,L.id));var W=h;1===y?W+=(u-m)/2:2===y&&(W+=u-m),r.push({position:[W,f],data:L,index:S,linesTotal:o.length,lineIndex:a,lineLettersTotal:x,lineLetterIndex:I,lineWordsTotal:b,lineWordIndex:_,wordsTotal:s,wordIndex:w,lettersTotal:l,letterIndex:T}),L.id===A&&c.id!==A&&(_++,w++),L.id!==A&&(I++,T++),h+=L.xadvance+g,c=L}}f+=d,h=0})),this._lettersTotal=l,this._wordsTotal=s,this._linesTotal=o.length}},{key:"getGlyph",value:function(t,e){var r=_(t,e);return r||(e===T?this._fallbackTabGlyph:e===A?this._fallbackSpaceGlyph:null)}},{key:"computeMetrics",value:function(t,e,r,n){var i,o,a=this._options.letterSpacing||0,s=this._options.font,l=0,u=0,h=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};r=Math.min(t.length,r);for(var f=e;f<r;f++){var d=t.charCodeAt(f);if(i=this.getGlyph(s,d)){i.char=t[f],i.xoffset;var c=(l+=o?O(s,o.id,i.id):0)+i.xadvance+a,p=l+i.width;if(p>=n||c>=n)break;l=c,u=p,o=i}h++}return o&&(u+=o.xoffset),{start:e,end:e+h,width:u}}},{key:"_setupSpaceGlyphs",value:function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=_(t,A)||function(t){for(var e=0;e<w.length;e++){var r=w[e].charCodeAt(0),n=S(t.chars,r);if(n>=0)return t.chars[n]}return 0}(t)||t.chars[0],r=this._options.tabSize*e.xadvance;this._fallbackSpaceGlyph=e;var n=Object.assign({},e);this._fallbackTabGlyph=Object.assign(n,{x:0,y:0,xadvance:r,id:T,xoffset:0,yoffset:0,width:0,height:0})}}}]),t}();function _(t,e){if(!t.chars||0===t.chars.length)return null;var r=S(t.chars,e);return r>=0?t.chars[r]:null}function O(t,e,r){if(!t.kernings||0===t.kernings.length)return 0;for(var n=t.kernings,i=0;i<n.length;i++){var o=n[i];if(o.first===e&&o.second===r)return o.amount}return 0}function S(t,e,r){for(var n=r=r||0;n<t.length;n++)if(t[n].id===e)return n;return-1}function k(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}var L={min:[0,0],max:[0,0]};function W(t){var e=t.length/2;L.min[0]=t[0],L.min[1]=t[1],L.max[0]=t[0],L.max[1]=t[1];for(var r=0;r<e;r++){var n=t[2*r+0],i=t[2*r+1];L.min[0]=Math.min(n,L.min[0]),L.min[1]=Math.min(i,L.min[1]),L.max[0]=Math.max(n,L.max[0]),L.max[1]=Math.max(i,L.max[1])}}var j={computeBox:function(t,e){return W(t),e.min.set(L.min[0],L.min[1],0),e.max.set(L.max[0],L.max[1],0),e},computeSphere:function(t,e){W(t);var r=L.min[0],n=L.min[1],i=L.max[0]-r,o=L.max[1]-n,a=Math.sqrt(i*i+o*o);e.center.set(r+i/2,n+o/2,0),e.radius=a/2}};var B={pages:function(t){var e=new Float32Array(4*t.length*1),r=0;return t.forEach((function(t){var n=t.data.page||0;e[r++]=n,e[r++]=n,e[r++]=n,e[r++]=n})),e},attributes:function(t,e,r,n,i){var o=new Float32Array(4*t.length*2),a=new Float32Array(4*t.length*2),s=new Float32Array(4*t.length*2),l=new Float32Array(4*t.length*2),u=new Float32Array(4*t.length*2),h=new Float32Array(4*t.length*2),f=0,d=0,c=0,p=0,g=0,v=0;return t.forEach((function(t){var y=t.data,m=y.x+y.width,b=y.y+y.height,w=y.x/e,x=y.y/r,T=m/e,A=b/r;n&&(x=(r-y.y)/r,A=(r-b)/r),o[f++]=w,o[f++]=x,o[f++]=w,o[f++]=A,o[f++]=T,o[f++]=A,o[f++]=T,o[f++]=x,a[p++]=t.position[0]/i.width,a[p++]=(t.position[1]+i.height)/i.height,a[p++]=t.position[0]/i.width,a[p++]=(t.position[1]+i.height+y.height)/i.height,a[p++]=(t.position[0]+y.width)/i.width,a[p++]=(t.position[1]+i.height+y.height)/i.height,a[p++]=(t.position[0]+y.width)/i.width,a[p++]=(t.position[1]+i.height)/i.height,s[g++]=0,s[g++]=1,s[g++]=0,s[g++]=0,s[g++]=1,s[g++]=0,s[g++]=1,s[g++]=1,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height,l[v++]=y.width,l[v++]=y.height;var I=t.position[0]+y.xoffset,_=t.position[1]+y.yoffset,O=y.width,S=y.height;u[d++]=I,u[d++]=_,u[d++]=I,u[d++]=_+S,u[d++]=I+O,u[d++]=_+S,u[d++]=I+O,u[d++]=_,h[c++]=I+O/2,h[c++]=_+S/2,h[c++]=I+O/2,h[c++]=_+S/2,h[c++]=I+O/2,h[c++]=_+S/2,h[c++]=I+O/2,h[c++]=_+S/2})),{uvs:o,layoutUvs:a,positions:u,centers:h,glyphUvs:s,glyphResolution:l}},infos:function(t,e){for(var r=new Float32Array(4*t.length),n=new Float32Array(4*t.length),i=new Float32Array(4*t.length),o=new Float32Array(4*t.length),a=new Float32Array(4*t.length),s=new Float32Array(4*t.length),l=new Float32Array(4*t.length),u=new Float32Array(4*t.length),h=new Float32Array(4*t.length),f=new Float32Array(4*t.length),d=0,c=0,p=0,g=0,v=0,y=0,m=0,b=0,w=0,x=0,T=0;T<t.length;T++){var A=t[T];r[d++]=A.linesTotal,r[d++]=A.linesTotal,r[d++]=A.linesTotal,r[d++]=A.linesTotal,n[c++]=A.lineIndex,n[c++]=A.lineIndex,n[c++]=A.lineIndex,n[c++]=A.lineIndex,i[p++]=A.lineLettersTotal,i[p++]=A.lineLettersTotal,i[p++]=A.lineLettersTotal,i[p++]=A.lineLettersTotal,o[g++]=A.lineLetterIndex,o[g++]=A.lineLetterIndex,o[g++]=A.lineLetterIndex,o[g++]=A.lineLetterIndex,a[v++]=A.lineWordsTotal,a[v++]=A.lineWordsTotal,a[v++]=A.lineWordsTotal,a[v++]=A.lineWordsTotal,s[y++]=A.lineWordIndex,s[y++]=A.lineWordIndex,s[y++]=A.lineWordIndex,s[y++]=A.lineWordIndex,l[m++]=A.wordsTotal,l[m++]=A.wordsTotal,l[m++]=A.wordsTotal,l[m++]=A.wordsTotal,u[b++]=A.wordIndex,u[b++]=A.wordIndex,u[b++]=A.wordIndex,u[b++]=A.wordIndex,h[w++]=A.lettersTotal,h[w++]=A.lettersTotal,h[w++]=A.lettersTotal,h[w++]=A.lettersTotal,f[x++]=A.letterIndex,f[x++]=A.letterIndex,f[x++]=A.letterIndex,f[x++]=A.letterIndex}return{linesTotal:r,lineIndex:n,lineLettersTotal:i,lineLetterIndex:o,lineWordsTotal:a,lineWordIndex:s,wordsTotal:l,wordIndex:u,lettersTotal:h,letterIndex:f}}},M=Object.prototype.toString;function F(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var P=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},C=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===M.call(t.buffer)||Array.isArray(t)}
/*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */,D=function(t){return null!=t&&(F(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&F(t.slice(0,0))}(t)||!!t._isBuffer)},E=[0,2,3],N=[2,1,3],U=function(t){h(n,t);var r=s(n);function n(t){var e;return i(this,n),"string"==typeof t&&(t={text:t}),(e=r.call(this))._options=Object.assign({},t),e._layout=null,e._visibleGlyphs=[],e.update(e._options),e}return a(n,[{key:"layout",get:function(){return this._layout}},{key:"visibleGlyphs",get:function(){return this._visibleGlyphs}},{key:"update",value:function(t){if(t=this._validateOptions(t)){this._layout=function(t){return new I(t)}(t);var r=!1!==t.flipY,n=t.font,i=n.common.scaleW,o=n.common.scaleH,a=this._layout.glyphs.filter((function(t){var e=t.data;return e.width*e.height>0}));this._visibleGlyphs=a;var s=B.attributes(a,i,o,r,this._layout),l=B.infos(a,this._layout),u=function(t,e){t&&(C(t)||D(t))||(e=t||{},t=null);for(var r="string"==typeof(e="number"==typeof e?{count:e}:e||{}).type?e.type:"uint16",n="number"==typeof e.count?e.count:1,i=e.start||0,o=!1!==e.clockwise?E:N,a=o[0],s=o[1],l=o[2],u=6*n,h=t||new(P(r))(u),f=0,d=0;f<u;f+=6,d+=4){var c=f+i;h[c+0]=d+0,h[c+1]=d+1,h[c+2]=d+2,h[c+3]=d+a,h[c+4]=d+s,h[c+5]=d+l}return h}([],{clockwise:!0,type:"uint16",count:a.length});if(this.setIndex(u),this.setAttribute("position",new e.BufferAttribute(s.positions,2)),this.setAttribute("center",new e.BufferAttribute(s.centers,2)),this.setAttribute("uv",new e.BufferAttribute(s.uvs,2)),this.setAttribute("layoutUv",new e.BufferAttribute(s.layoutUvs,2)),this.setAttribute("glyphUv",new e.BufferAttribute(s.glyphUvs,2)),this.setAttribute("glyphResolution",new e.BufferAttribute(s.glyphResolution,2)),this.setAttribute("lineIndex",new e.BufferAttribute(l.lineIndex,1)),this.setAttribute("lineLettersTotal",new e.BufferAttribute(l.lineLettersTotal,1)),this.setAttribute("lineLetterIndex",new e.BufferAttribute(l.lineLetterIndex,1)),this.setAttribute("lineWordsTotal",new e.BufferAttribute(l.lineWordsTotal,1)),this.setAttribute("lineWordIndex",new e.BufferAttribute(l.lineWordIndex,1)),this.setAttribute("wordIndex",new e.BufferAttribute(l.wordIndex,1)),this.setAttribute("letterIndex",new e.BufferAttribute(l.letterIndex,1)),!t.multipage&&"page"in this.attributes)this.deleteAttribute("page");else if(t.multipage){var h=B.pages(a);this.setAttribute("page",new e.BufferAttribute(h,1))}}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new e.Sphere);var t=this.attributes.position.array,r=this.attributes.position.itemSize;if(!t||!r||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);j.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new e.Box3);var t=this.boundingBox,r=this.attributes.position.array,n=this.attributes.position.itemSize;if(r&&n&&!(r.length<2))return j.computeBox(r,t);t.makeEmpty()}},{key:"_validateOptions",value:function(t){if("string"==typeof t&&(t={text:t}),!(t=Object.assign({},this._options,t)).font)throw new TypeError("must specify a { font } in options");return t}}]),n}(e.BufferGeometry),G={common:{uOpacity:{value:1},uColor:{value:{r:255,g:255,b:255}},uMap:{value:null}},rendering:{uThreshold:{value:.2},uAlphaTest:{value:.01}},strokes:{uStrokeColor:{value:{r:255,g:0,b:0}},uStrokeOutsetWidth:{value:0},uStrokeInsetWidth:{value:.3}}},H={side:e.FrontSide,transparent:!0,defines:{IS_SMALL:!1},extensions:{derivatives:!0},uniforms:c(c(c({},G.common),G.rendering),G.strokes),vertexShader:"#define GLSLIFY 1\nattribute vec2 layoutUv;attribute float lineIndex;attribute float lineLettersTotal;attribute float lineLetterIndex;attribute float lineWordsTotal;attribute float lineWordIndex;attribute float wordIndex;attribute float letterIndex;varying vec2 vUv;varying vec2 vLayoutUv;varying vec3 vViewPosition;varying vec3 vNormal;varying float vLineIndex;varying float vLineLettersTotal;varying float vLineLetterIndex;varying float vLineWordsTotal;varying float vLineWordIndex;varying float vWordIndex;varying float vLetterIndex;void main(){vec4 mvPosition=vec4(position,1.0);mvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;vUv=uv;vLayoutUv=layoutUv;vViewPosition=-mvPosition.xyz;vNormal=normal;vLineIndex=lineIndex;vLineLettersTotal=lineLettersTotal;vLineLetterIndex=lineLetterIndex;vLineWordsTotal=lineWordsTotal;vLineWordIndex=lineWordIndex;vWordIndex=wordIndex;vLetterIndex=letterIndex;}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;uniform float uOpacity;uniform float uThreshold;uniform float uAlphaTest;uniform vec3 uColor;uniform sampler2D uMap;uniform vec3 uStrokeColor;uniform float uStrokeOutsetWidth;uniform float uStrokeInsetWidth;float median(float r,float g,float b){return max(min(r,g),min(max(r,g),b));}void main(){vec3 s=texture2D(uMap,vUv).rgb;float sigDist=median(s.r,s.g,s.b)-0.5;float afwidth=1.4142135623730951/2.0;\n#ifdef IS_SMALL\nfloat alpha=smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDist);\n#else\nfloat alpha=clamp(sigDist/fwidth(sigDist)+0.5,0.0,1.0);\n#endif\nfloat sigDistOutset=sigDist+uStrokeOutsetWidth*0.5;float sigDistInset=sigDist-uStrokeInsetWidth*0.5;\n#ifdef IS_SMALL\nfloat outset=smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDistOutset);float inset=1.0-smoothstep(uThreshold-afwidth,uThreshold+afwidth,sigDistInset);\n#else\nfloat outset=clamp(sigDistOutset/fwidth(sigDistOutset)+0.5,0.0,1.0);float inset=1.0-clamp(sigDistInset/fwidth(sigDistInset)+0.5,0.0,1.0);\n#endif\nfloat border=outset*inset;if(alpha<uAlphaTest)discard;vec4 filledFragColor=vec4(uColor,uOpacity*alpha);gl_FragColor=filledFragColor;}"},z=function(t){h(r,t);var e=s(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),t=Object.assign(JSON.parse(JSON.stringify(H)),t),e.call(this,t)}return a(r)}(e.ShaderMaterial),R={transparent:!0,opacity:1,alphaTest:.01,threshold:.2,color:"#ffffff",strokeColor:"#000000",strokeOutsetWidth:0,strokeInsetWidth:.3,isSmooth:0},V=function(t){h(o,t);var r=s(o);function o(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,o),a=Object.assign(JSON.parse(JSON.stringify(R)),a),(t=r.call(this)).transparent=a.transparent,t.alphaTest=a.alphaTest,t.opacity=n.uniform(a.opacity),t.color=n.uniform(new e.Color(a.color)),t.map=a.map,t.isSmooth=n.uniform(a.isSmooth),t.threshold=n.uniform(a.threshold),t.strokeColor=n.uniform(new e.Color(a.strokeColor)),t.strokeOutsetWidth=n.uniform(a.strokeOutsetWidth),t.strokeInsetWidth=n.uniform(a.strokeInsetWidth);var s=.7071067811865476,l=function(t,e,r){return n.max(n.min(t,e),n.min(n.max(t,e),r))},u=n.texture(t.map,n.uv()),h=n.sub(l(u.r,u.g,u.b),.5),f=n.clamp(n.add(n.div(h,n.fwidth(h)),.5),0,1),d=n.smoothstep(n.sub(t.threshold,s),n.add(t.threshold,s),h);f=n.mix(f,d,t.isSmooth);var c=n.add(h,n.mul(t.strokeOutsetWidth,.5)),p=n.sub(h,n.mul(t.strokeOutsetWidth,.5)),g=n.clamp(n.add(n.div(c,n.fwidth(c)),.5),0,1),v=n.oneMinus(n.clamp(n.add(n.div(p,n.fwidth(p)),.5),0,1)),y=n.smoothstep(n.sub(t.threshold,s),n.add(t.threshold,s),c),m=n.oneMinus(n.smoothstep(n.sub(t.threshold,s),n.add(t.threshold,s),p));g=n.mix(g,y,t.isSmooth),v=n.mix(v,m,t.isSmooth);var b=n.mul(g,v);return t.colorNode=n.mix(t.color,t.strokeColor,b),t.opacityNode=n.mul(t.opacity,n.add(f,b)),t}return a(o)}(r.NodeMaterial);t.MSDFTextGeometry=U,t.MSDFTextMaterial=z,t.MSDFTextNodeMaterial=V,t.uniforms=G,Object.defineProperty(t,"__esModule",{value:!0})}));
